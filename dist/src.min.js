!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.FacetedSearch=t()}}(function(){var t;return function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e){function n(t,e){return h.isUndefined(e)?""+e:!h.isNumber(e)||!isNaN(e)&&isFinite(e)?h.isFunction(e)||h.isRegExp(e)?e.toString():e:e.toString()}function r(t,e){return h.isString(t)?t.length<e?t:t.slice(0,e):t}function i(t){return r(JSON.stringify(t.actual,n),128)+" "+t.operator+" "+r(JSON.stringify(t.expected,n),128)}function s(t,e,n,r,i){throw new g.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function o(t,e){t||s(t,!0,e,"==",g.ok)}function a(t,e){if(t===e)return!0;if(h.isBuffer(t)&&h.isBuffer(e)){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return h.isDate(t)&&h.isDate(e)?t.getTime()===e.getTime():h.isRegExp(t)&&h.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:h.isObject(t)||h.isObject(e)?l(t,e):t==e}function u(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function l(t,e){if(h.isNullOrUndefined(t)||h.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(u(t))return u(e)?(t=f.call(t),e=f.call(e),a(t,e)):!1;try{var n,r,i=y(t),s=y(e)}catch(o){return!1}if(i.length!=s.length)return!1;for(i.sort(),s.sort(),r=i.length-1;r>=0;r--)if(i[r]!=s[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!a(t[n],e[n]))return!1;return!0}function c(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function p(t,e,n,r){var i;h.isString(n)&&(r=n,n=null);try{e()}catch(o){i=o}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&s(i,n,"Missing expected exception"+r),!t&&c(i,n)&&s(i,n,"Got unwanted exception"+r),t&&i&&n&&!c(i,n)||!t&&i)throw i}var h=t("util/"),f=Array.prototype.slice,d=Object.prototype.hasOwnProperty,g=e.exports=o;g.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var e=t.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,o=e.name,a=r.indexOf("\n"+o);if(a>=0){var u=r.indexOf("\n",a+1);r=r.substring(u+1)}this.stack=r}}},h.inherits(g.AssertionError,Error),g.fail=s,g.ok=o,g.equal=function(t,e,n){t!=e&&s(t,e,n,"==",g.equal)},g.notEqual=function(t,e,n){t==e&&s(t,e,n,"!=",g.notEqual)},g.deepEqual=function(t,e,n){a(t,e)||s(t,e,n,"deepEqual",g.deepEqual)},g.notDeepEqual=function(t,e,n){a(t,e)&&s(t,e,n,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(t,e,n){t!==e&&s(t,e,n,"===",g.strictEqual)},g.notStrictEqual=function(t,e,n){t===e&&s(t,e,n,"!==",g.notStrictEqual)},g.throws=function(){p.apply(this,[!0].concat(f.call(arguments)))},g.doesNotThrow=function(){p.apply(this,[!1].concat(f.call(arguments)))},g.ifError=function(t){if(t)throw t};var y=Object.keys||function(t){var e=[];for(var n in t)d.call(t,n)&&e.push(n);return e}},{"util/":5}],2:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],3:[function(t,e){function n(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],4:[function(t,e){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],5:[function(t,e,n){(function(e,r){function i(t,e){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(e)?r.showHidden=e:e&&n._extend(r,e),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),u(r,t,r.depth)}function s(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function o(t){return t}function a(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function u(t,e,r){if(t.customInspect&&e&&C(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return b(i)||(i=u(t,i,r)),i}var s=l(t,e);if(s)return s;var o=Object.keys(e),g=a(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),O(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return c(e);if(0===o.length){if(C(e)){var y=e.name?": "+e.name:"";return t.stylize("[Function"+y+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(k(e))return t.stylize(Date.prototype.toString.call(e),"date");if(O(e))return c(e)}var v="",m=!1,w=["{","}"];if(d(e)&&(m=!0,w=["[","]"]),C(e)){var _=e.name?": "+e.name:"";v=" [Function"+_+"]"}if(x(e)&&(v=" "+RegExp.prototype.toString.call(e)),k(e)&&(v=" "+Date.prototype.toUTCString.call(e)),O(e)&&(v=" "+c(e)),0===o.length&&(!m||0==e.length))return w[0]+v+w[1];if(0>r)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var M;return M=m?p(t,e,r,g,o):o.map(function(n){return h(t,e,r,g,n,m)}),t.seen.pop(),f(M,v,w)}function l(t,e){if(_(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,i){for(var s=[],o=0,a=e.length;a>o;++o)s.push(L(e,String(o))?h(t,e,n,r,String(o),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||s.push(h(t,e,n,r,i,!0))}),s}function h(t,e,n,r,i,s){var o,a,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),L(r,i)||(o="["+i+"]"),a||(t.seen.indexOf(l.value)<0?(a=y(n)?u(t,l.value,null):u(t,l.value,n-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),_(o)){if(s&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function f(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function _(t){return void 0===t}function x(t){return M(t)&&"[object RegExp]"===S(t)}function M(t){return"object"==typeof t&&null!==t}function k(t){return M(t)&&"[object Date]"===S(t)}function O(t){return M(t)&&("[object Error]"===S(t)||t instanceof Error)}function C(t){return"function"==typeof t}function j(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function S(t){return Object.prototype.toString.call(t)}function P(t){return 10>t?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,e=[P(t.getHours()),P(t.getMinutes()),P(t.getSeconds())].join(":");return[t.getDate(),F[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var N=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,s=r.length,o=String(t).replace(N,function(t){if("%%"===t)return"%";if(n>=s)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];s>n;a=r[++n])o+=y(a)||!M(a)?" "+a:" "+i(a);return o},n.deprecate=function(t,i){function s(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}if(_(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var o=!1;return s};var R,q={};n.debuglog=function(t){if(_(R)&&(R=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!q[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var r=e.pid;q[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else q[t]=function(){};return q[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=y,n.isNullOrUndefined=v,n.isNumber=m,n.isString=b,n.isSymbol=w,n.isUndefined=_,n.isRegExp=x,n.isObject=M,n.isDate=k,n.isError=O,n.isFunction=C,n.isPrimitive=j,n.isBuffer=t("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!M(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("FWaASH"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":4,FWaASH:3,inherits:2}],6:[function(t,e){(function(){e.exports={el:function(t){return{closest:function(e){var n,r,i;for(n=function(t){return t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector};t;){if(i=n(t),null!=i&&(r=i.bind(t)(e)))return t;t=t.parentNode}},position:function(e){var n,r,i;for(null==e&&(e=document.body),n=0,i=0,r=t;null!=r&&r!==e&&!this.hasDescendant(e);)n+=r.offsetLeft,i+=r.offsetTop,r=r.offsetParent;return{left:n,top:i}},boundingBox:function(){var e;return e=this.position(),e.width=t.clientWidth,e.height=t.clientHeight,e.right=e.left+e.width,e.bottom=e.top+e.height,e},hasDescendant:function(e){var n;for(n=e.parentNode;null!=n;){if(n===t)return!0;n=n.parentNode}return!1},insertAfter:function(e){return e.parentNode.insertBefore(t,e.nextSibling)},hasScrollBar:function(t){return hasScrollBarX(t)||hasScrollBarY(t)},hasScrollBarX:function(t){return t.scrollWidth>t.clientWidth},hasScrollBarY:function(t){return t.scrollHeight>t.clientHeight},inViewport:function(e){var n,r,i;return i=null!=e?e:window,n=null!=e?e:document.documentElement,r=t.getBoundingClientRect(),r.top>=0&&r.left>=0&&r.bottom<=(i.innerHeight||n.clientHeight)&&r.right<=(i.innerWidth||n.clientWidth)}}}}}).call(this)},{}],7:[function(t,e){(function(){var t={}.hasOwnProperty;e.exports={get:function(t,e){return null==e&&(e={}),this._sendRequest("GET",t,e)},post:function(t,e){return null==e&&(e={}),this._sendRequest("POST",t,e)},put:function(t,e){return null==e&&(e={}),this._sendRequest("PUT",t,e)},_promise:function(){return{done:function(t){return this.callDone=t},callDone:null,fail:function(t){return this.callFail=t},callFail:null,always:function(t){return this.callAlways=t},callAlways:null}},_sendRequest:function(e,n,r){var i,s,o,a,u;null==r&&(r={}),s=this._promise(),null==r.headers&&(r.headers={}),a=new XMLHttpRequest,a.onreadystatechange=function(){var t;if(a.readyState===XMLHttpRequest.DONE)if(null!=s.callAlways&&s.callAlways(a),200<=(t=a.status)&&206>=t){if(null!=s.callDone)return s.callDone(a)}else if(null!=s.callFail)return s.callFail(a)},a.open(e,n,!0),a.setRequestHeader("Content-type","application/json"),u=r.headers;for(i in u)t.call(u,i)&&(o=u[i],a.setRequestHeader(i,o));return a.send(r.data),s}}}).call(this)},{}],8:[function(t,e){(function(){e.exports={generateID:function(t){var e,n;for(t=null!=t&&t>0?t-1:7,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.charAt(Math.floor(52*Math.random()));t--;)n+=e.charAt(Math.floor(Math.random()*e.length));return n},setResetTimeout:function(){var t;return t=null,function(e,n,r){return null!=t&&(null!=r&&r(),clearTimeout(t)),t=setTimeout(function(){return t=null,n()},e)}}()}}).call(this)},{}],9:[function(e,n,r){(function(i){!function(e){if("object"==typeof r)n.exports=e();else if("function"==typeof t&&t.amd)t(e);else{var s;"undefined"!=typeof window?s=window:"undefined"!=typeof i?s=i:"undefined"!=typeof self&&(s=self),s.Pagination=e()}}(function(){var t;return function n(t,r,i){function s(a,u){if(!r[a]){if(!t[a]){var l="function"==typeof e&&e;if(!u&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return s(n?n:e)},c,c.exports,n,t,r,i)}return r[a].exports}for(var o="function"==typeof e&&e,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(t,e){(function(){e.exports={generateID:function(t){var e,n;for(t=null!=t&&t>0?t-1:7,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.charAt(Math.floor(52*Math.random()));t--;)n+=e.charAt(Math.floor(Math.random()*e.length));return n},setResetTimeout:function(){var t;return t=null,function(e,n,r){return null!=t&&(null!=r&&r(),clearTimeout(t)),t=setTimeout(function(){return t=null,n()},e)}}()}}).call(this)},{}],2:[function(e,n,r){(function(i){!function(e){if("object"==typeof r)n.exports=e();else if("function"==typeof t&&t.amd)t(e);else{var s;"undefined"!=typeof window?s=window:"undefined"!=typeof i?s=i:"undefined"!=typeof self&&(s=self),s.jade=e()}}(function(){return function t(n,r,i){function s(a,u){if(!r[a]){if(!n[a]){var l="function"==typeof e&&e;if(!u&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};n[a][0].call(c.exports,function(t){var e=n[a][1][t];return s(e?e:t)},c,c.exports,t,n,r,i)}return r[a].exports}for(var o="function"==typeof e&&e,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(t,e,n){"use strict";function r(t){return null!=t&&""!==t}function i(t){return Array.isArray(t)?t.map(i).filter(r).join(" "):t}n.merge=function s(t,e){if(1===arguments.length){for(var n=t[0],i=1;i<t.length;i++)n=s(n,t[i]);return n}var o=t["class"],a=e["class"];(o||a)&&(o=o||[],a=a||[],Array.isArray(o)||(o=[o]),Array.isArray(a)||(a=[a]),t["class"]=o.concat(a).filter(r));for(var u in e)"class"!=u&&(t[u]=e[u]);return t},n.joinClasses=i,n.cls=function(t,e){for(var r=[],s=0;s<t.length;s++)r.push(e&&e[s]?n.escape(i([t[s]])):i(t[s]));var o=i(r);return o.length?' class="'+o+'"':""},n.attr=function(t,e,r,i){return"boolean"==typeof e||null==e?e?" "+(i?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof e?" "+t+"='"+JSON.stringify(e).replace(/'/g,"&apos;")+"'":r?" "+t+'="'+n.escape(e)+'"':" "+t+'="'+e+'"'},n.attrs=function(t,e){var r=[],s=Object.keys(t);if(s.length)for(var o=0;o<s.length;++o){var a=s[o],u=t[a];"class"==a?(u=i(u))&&r.push(" "+a+'="'+u+'"'):r.push(n.attr(a,u,!1,e))}return r.join("")},n.escape=function(t){var e=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return e===""+t?t:e},n.rethrow=function o(e,n,r,i){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&n||i))throw e.message+=" on line "+r,e;try{i=i||t("fs").readFileSync(n,"utf8")}catch(s){o(e,null,r)}var a=3,u=i.split("\n"),l=Math.max(r-a,0),c=Math.min(u.length,r+a),a=u.slice(l,c).map(function(t,e){var n=e+l+1;return(n==r?"  > ":"    ")+n+"| "+t}).join("\n");throw e.path=n,e.message=(n||"Jade")+":"+r+"\n"+a+"\n\n"+e.message,e}},{fs:2}],2:[function(){},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e){var n,r,i,s,o,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("backbone"),n=t("jquery"),o=t("funcky.util"),s=t("./main.jade"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.tagName="ul",e.prototype.className="hibb-pagination",e.prototype.initialize=function(t){var e,n;return this.options=t,null==(e=this.options).step10&&(e.step10=!0),null==(n=this.options).triggerPageNumber&&(n.triggerPageNumber=!0),this._currentPageNumber=null!=this.options.resultsStart&&this.options.resultsStart>0?this.options.resultsStart/this.options.resultsPerPage+1:1,this.setPageNumber(this._currentPageNumber,!0)},e.prototype.render=function(){var t;return this._pageCount=Math.ceil(this.options.resultsTotal/this.options.resultsPerPage),t=n.extend(this.options,{currentPageNumber:this._currentPageNumber,pageCount:this._pageCount}),this.el.innerHTML=s(t),this._pageCount<=1&&this.$el.hide(),this},e.prototype.events=function(){return{"click li.prev10.active":"_handlePrev10","click li.prev.active":"_handlePrev","click li.next.active":"_handleNext","click li.next10.active":"_handleNext10","click li.current:not(.active)":"_handleCurrentClick","blur li.current.active input":"_handleBlur","keyup li.current.active input":"_handleKeyup"}},e.prototype._handlePrev10=function(){return this.setPageNumber(this._currentPageNumber-10)},e.prototype._handlePrev=function(){return this.setPageNumber(this._currentPageNumber-1)},e.prototype._handleNext=function(){return this.setPageNumber(this._currentPageNumber+1)},e.prototype._handleNext10=function(){return this.setPageNumber(this._currentPageNumber+10)},e.prototype._handleCurrentClick=function(t){var e,n,r;return r=this.$(t.currentTarget),n=r.find("span"),e=r.find("input"),e.width(n.width()),r.addClass("active"),e.animate({width:40},"fast"),e.focus(),e.val(this._currentPageNumber)},e.prototype._handleKeyup=function(t){var e,n;return e=this.$(t.currentTarget),n=+e.val(),13===t.keyCode?(n>=1&&n<=this._pageCount&&this.setPageNumber(n),this._deactivateCurrentLi(e)):void 0},e.prototype._handleBlur=function(t){return this._deactivateCurrentLi(this.$(t.currentTarget))},e.prototype._deactivateCurrentLi=function(t){return t.animate({width:0},"fast",function(){var e;return e=t.parent(),e.removeClass("active")})},e.prototype.getCurrentPageNumber=function(){return this._currentPageNumber},e.prototype.setPageNumber=function(t,e){var n;return null==e&&(e=!1),this.triggerPageNumber||(n=t<this._currentPageNumber?"prev":"next",this.trigger(n)),this._currentPageNumber=t,this.render(),e?void 0:o.setResetTimeout(500,function(e){return function(){return e.trigger("change:pagenumber",t)}}(this))},e.prototype.destroy=function(){return this.remove()},e}(r.View),e.exports=i},{"./main.jade":4,"funcky.util":1}],4:[function(t,e){var n=t("jade/runtime");e.exports=function(t){var e,r=[],i=t||{};return function(t,i,s,o){t&&i>=10&&r.push("<li"+n.cls(["prev10",s>10?"active":""],[null,!0])+">&laquo;</li>"),r.push("<li"+n.cls(["prev",s>1?"active":""],[null,!0])+">&lsaquo;</li>"),null!=o&&r.push('<li class="pageNameSingular">'+n.escape(null==(e=o[0])?"":e)+"</li>"),r.push('<li class="current"><input type="text"'+n.attr("value",s,!0,!1)+"/><span>"+n.escape(null==(e=s)?"":e)+'</span></li><li class="text">of</li><li class="pagecount">'+n.escape(null==(e=i)?"":e)+"</li>"),null!=o&&r.push('<li class="pageNamePlural">'+n.escape(null==(e=o[1])?"":e)+"</li>"),r.push("<li"+n.cls(["next",i>s?"active":""],[null,!0])+">&rsaquo;</li>"),t&&i>=10&&r.push("<li"+n.cls(["next10",i-10>=s?"active":""],[null,!0])+">&raquo;</li>")}.call(this,"step10"in i?i.step10:"undefined"!=typeof step10?step10:void 0,"pageCount"in i?i.pageCount:"undefined"!=typeof pageCount?pageCount:void 0,"currentPageNumber"in i?i.currentPageNumber:"undefined"!=typeof currentPageNumber?currentPageNumber:void 0,"showPageNames"in i?i.showPageNames:"undefined"!=typeof showPageNames?showPageNames:void 0),r.join("")}},{"jade/runtime":2}]},{},[3])(3)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,n,r){(function(i){!function(e){if("object"==typeof r)n.exports=e();else if("function"==typeof t&&t.amd)t(e);else{var s;"undefined"!=typeof window?s=window:"undefined"!=typeof i?s=i:"undefined"!=typeof self&&(s=self),s.jade=e()}}(function(){return function t(n,r,i){function s(a,u){if(!r[a]){if(!n[a]){var l="function"==typeof e&&e;if(!u&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};n[a][0].call(c.exports,function(t){var e=n[a][1][t];return s(e?e:t)},c,c.exports,t,n,r,i)}return r[a].exports}for(var o="function"==typeof e&&e,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(t,e,n){"use strict";function r(t){return null!=t&&""!==t}function i(t){return Array.isArray(t)?t.map(i).filter(r).join(" "):t}n.merge=function s(t,e){if(1===arguments.length){for(var n=t[0],i=1;i<t.length;i++)n=s(n,t[i]);return n}var o=t["class"],a=e["class"];(o||a)&&(o=o||[],a=a||[],Array.isArray(o)||(o=[o]),Array.isArray(a)||(a=[a]),t["class"]=o.concat(a).filter(r));for(var u in e)"class"!=u&&(t[u]=e[u]);return t},n.joinClasses=i,n.cls=function(t,e){for(var r=[],s=0;s<t.length;s++)r.push(e&&e[s]?n.escape(i([t[s]])):i(t[s]));var o=i(r);return o.length?' class="'+o+'"':""},n.attr=function(t,e,r,i){return"boolean"==typeof e||null==e?e?" "+(i?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof e?" "+t+"='"+JSON.stringify(e).replace(/'/g,"&apos;")+"'":r?" "+t+'="'+n.escape(e)+'"':" "+t+'="'+e+'"'},n.attrs=function(t,e){var r=[],s=Object.keys(t);if(s.length)for(var o=0;o<s.length;++o){var a=s[o],u=t[a];"class"==a?(u=i(u))&&r.push(" "+a+'="'+u+'"'):r.push(n.attr(a,u,!1,e))}return r.join("")},n.escape=function(t){var e=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return e===""+t?t:e},n.rethrow=function o(e,n,r,i){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&n||i))throw e.message+=" on line "+r,e;try{i=i||t("fs").readFileSync(n,"utf8")}catch(s){o(e,null,r)}var a=3,u=i.split("\n"),l=Math.max(r-a,0),c=Math.min(u.length,r+a),a=u.slice(l,c).map(function(t,e){var n=e+l+1;return(n==r?"  > ":"    ")+n+"| "+t}).join("\n");throw e.path=n,e.message=(n||"Jade")+":"+r+"\n"+a+"\n\n"+e.message,e}},{fs:2}],2:[function(){},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(t,e){var n,r,i,s,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("backbone"),s=t("underscore"),i={Option:t("../models/facets/list.option.coffee")},r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=i.Option,e.prototype.initialize=function(){return this.comparator=this.strategies.amount_desc},e.prototype.revert=function(){return this.comparator=this.strategies.amount_desc,this.each(function(){return function(t){return t.set("checked",!1,{silent:!0})}}(this))},e.prototype.updateOptions=function(t){return null==t&&(t=[]),this.each(function(){return function(t){return t.set("count",0,{silent:!0})}}(this)),s.each(t,function(t){return function(e){var n;return n=t.get(e.name),null!=n?n.set("count",e.count,{silent:!0}):(n=new i.Option(e),t.add(n))}}(this)),this.sort()},e.prototype.strategies={alpha_asc:function(t){return+!t.get("visible")+(+!t.get("count")+t.get("name"))},alpha_desc:function(t){var e;return e=String.fromCharCode.apply(String,s.map(t.get("name").split(""),function(t){return 65535-t.charCodeAt()})),+!t.get("visible")+(+!t.get("count")+e)},amount_asc:function(t){var e,n;return n=t.get("visible")?0:10,n+=+!t.get("count"),e=t.get(0===t.get("count")?"total":"count"),n-=1/e},amount_desc:function(t){var e,n;return n=t.get("visible")?0:10,n+=+!t.get("count"),e=t.get(0===t.get("count")?"total":"count"),n+=1/e}},e.prototype.orderBy=function(t,e){return null==e&&(e=!1),this.comparator=this.strategies[t],this.sort({silent:e})},e.prototype.setAllVisible=function(){return this.each(function(t){return t.set("visible",!0)}),this.sort()},e}(n.Collection),e.exports=r},{"../models/facets/list.option.coffee":18}],12:[function(t,e){var n,r,i,s,o,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("backbone"),o=t("underscore"),r=t("../models/searchresult"),s=t("funcky.req"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.model=r,e.prototype.initialize=function(t,e){return this.config=e.config,this.cachedModels={}},e.prototype.clearCache=function(){return this.cachedModels={}},e.prototype.getCurrent=function(){return this._current},e.prototype._setCurrent=function(t,e){return this._current=t,this.trigger(e,this._current)},e.prototype._addModel=function(t,e,n,r){return e.location=t,this.cachedModels[n]=new this.model(e),this.add(this.cachedModels[n]),this._setCurrent(this.cachedModels[n],r)},e.prototype.runQuery=function(t,e){var n,r;return null==e&&(e={}),null==e.cache&&(e.cache=!0),n="change:results",r=JSON.stringify(t),e.cache&&this.cachedModels.hasOwnProperty(r)?this._setCurrent(this.cachedModels[r],n):this.postQuery(t,function(t){return function(e){var i;return i=""+e+"?rows="+t.config.get("resultRows"),t.getResults(i,function(i){return t._addModel(e,i,r,n)})}}(this))},e.prototype.moveCursor=function(t){var e,n;return n="_prev"===t||"_next"===t?this._current.get(t):t,e="change:cursor",null!=n?this.cachedModels.hasOwnProperty(n)?this._setCurrent(this.cachedModels[n],e):this.getResults(n,function(t){return function(r){return t._addModel(t._current.get("location"),r,n,e)}}(this)):void 0},e.prototype.page=function(t,e){var n,r,i;return n="change:page",r=this.config.get("resultRows")*(t-1),i=this._current.get("location")+("?rows="+this.config.get("resultRows")+"&start="+r),null!=e&&(i+="&database="+e),this.cachedModels.hasOwnProperty(i)?this._setCurrent(this.cachedModels[i],n):this.getResults(i,function(t){return function(e){return t._addModel(t._current.get("location"),e,i,n)}}(this))},e.prototype.postQuery=function(t,e){var n,r;return this.trigger("request"),n={data:JSON.stringify(t)},this.config.has("authorizationHeaderToken")&&(n.headers={Authorization:this.config.get("authorizationHeaderToken")}),this.config.has("requestOptions")&&o.extend(n,this.config.get("requestOptions")),r=s.post(this.config.get("baseUrl")+this.config.get("searchPath"),n),r.done(function(){return function(t){return 201===t.status?e(t.getResponseHeader("Location")):void 0}}(this)),r.fail(function(t){return function(e){if(401===e.status)return t.trigger("unauthorized");throw t.trigger("request:failed",e),new Error("Failed posting FacetedSearch queryOptions to the server!",e)}}(this))},e.prototype.getResults=function(t,e){var n,r;return this.trigger("request"),this.config.has("authorizationHeaderToken")&&(n={headers:{Authorization:this.config.get("authorizationHeaderToken")}}),r=s.get(t,n),r.done(function(t){return function(n){return e(JSON.parse(n.responseText)),t.trigger("sync")}}(this)),r.fail(function(t){return function(e){if(401===e.status)return t.trigger("unauthorized");throw t.trigger("request:failed",e),new Error("Failed getting FacetedSearch results from the server!",e)}}(this))},e}(n.Collection),e.exports=i},{"../models/searchresult":23,"funcky.req":7}],13:[function(t,e){var n,r,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("backbone"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.defaults=function(){return{resultRows:10,baseUrl:"",searchPath:"",textSearch:"advanced",authorizationHeaderToken:null,queryOptions:{},facetTitleMap:{},facetOrder:[],templates:{},autoSearch:!0,requestOptions:{},results:!1,entryTermSingular:"entry",entryTermPlural:"entries",entryMetadataFields:[],levels:[]}},e}(n.Model),e.exports=r},{}],14:[function(t,e){var n,r,i,s,o,a,u,l,c,p,h={}.hasOwnProperty,f=function(t,e){function n(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("backbone"),n=t("jquery"),r.$=n,p=t("underscore"),l=t("funcky.el").el,i=t("./config"),o=t("./models/query-options"),a=t("./collections/searchresults"),u={TextSearch:t("./views/text-search"),Facets:t("./views/facets"),Results:t("./views/results"),ListFacet:t("./views/facets/list")},c=t("../jade/main.jade"),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.initialize=function(t){return null==t&&(t={}),null!=t.facetViewMap&&(this.facetViewMap=p.clone(t.facetViewMap),delete t.facetViewMap),this.extendConfig(t),this.initQueryOptions(),this.initSearchResults(),this.render(),this.config.get("development")?(this.searchResults.add(JSON.parse(localStorage.getItem("faceted-search-dev-model"))),this.searchResults.cachedModels['{"facetValues":[],"sortParameters":[]}']=this.searchResults.first(),setTimeout(function(t){return function(){return t.$(".overlay").hide()}}(this),100)):void 0},e.prototype.render=function(){return this.config.get("templates").hasOwnProperty("main")&&(c=this.config.get("templates").main),this.el.innerHTML=c(),this.initFacets(this.facetViewMap),this.$(".faceted-search").addClass("search-type-"+this.config.get("textSearch")),("simple"===this.config.get("textSearch")||"advanced"===this.config.get("textSearch"))&&this.renderTextSearch(),this.config.get("results")&&this.renderResults(),this},e.prototype.renderTextSearch=function(){var t;return this.textSearch=new u.TextSearch({config:this.config}),t=this.el.querySelector(".text-search-placeholder"),t.parentNode.replaceChild(this.textSearch.el,t),this.listenTo(this.textSearch,"change",function(t){return function(e){return t.queryOptions.set(e,{silent:!0})}}(this)),this.listenTo(this.textSearch,"search",function(t){return function(){return t.search()}}(this))},e.prototype.renderResults=function(){return this.$el.addClass("with-results"),this.results=new u.Results({el:this.$(".results"),config:this.config,searchResults:this.searchResults}),this.listenTo(this.results,"result:click",function(t){return this.trigger("result:click",t)
}),this.listenTo(this.results,"result:layer-click",function(t,e){return this.trigger("result:layer-click",t,e)}),this.listenTo(this.results,"change:sort-levels",function(t){return this.sortResultsBy(t)})},e.prototype.events=function(){return{"click ul.facets-menu li.collapse-expand":function(t){return this.facets.toggle(t)},"click ul.facets-menu li.reset":"onReset","click ul.facets-menu li.switch button":"onSwitchType"}},e.prototype.onSwitchType=function(t){var e;return t.preventDefault(),e="advanced"===this.config.get("textSearch")?"simple":"advanced",this.config.set({textSearch:e}),this.$(".faceted-search").toggleClass("search-type-simple"),this.$(".faceted-search").toggleClass("search-type-advanced"),1===this.searchResults.length?this.search():this.searchResults.length>1?this.update():void 0},e.prototype.onReset=function(t){return t.preventDefault(),this.reset()},e.prototype.destroy=function(){return null!=this.facets&&this.facets.destroy(),null!=this.textSearch&&this.textSearch.destroy(),null!=this.results&&this.results.destroy(),this.remove()},e.prototype.extendConfig=function(t){var e;return e=t.facetTitleMap,delete t.facetTitleMap,this.config=new i(t),this.config.set({facetTitleMap:p.extend(this.config.get("facetTitleMap"),e)}),-1===["none","simple","advanced"].indexOf(this.config.get("textSearch"))&&this.config.set({textSearch:"advanced"}),this.listenTo(this.config,"change:resultRows",function(t){return function(){return t.refresh()}}(this))},e.prototype.initQueryOptions=function(){var t;return t=p.extend(this.config.get("queryOptions"),this.config.get("textSearchOptions")),this.queryOptions=new o(t),this.config.get("autoSearch")?this.listenTo(this.queryOptions,"change",function(t){return function(){return t.search()}}(this)):void 0},e.prototype.initSearchResults=function(){return this.searchResults=new a(null,{config:this.config}),this.listenTo(this.searchResults,"change:results",function(t){return function(e){return"simple"!==t.config.get("textSearch")&&t.update(),t.trigger("change:results",e)}}(this)),this.listenTo(this.searchResults,"change:cursor",function(t){return function(e){return t.trigger("change:results",e)}}(this)),this.listenTo(this.searchResults,"change:page",function(t){return function(e,n){return t.trigger("change:page",e,n)}}(this)),this.listenTo(this.searchResults,"request",function(t){return function(){return t.showLoader()}}(this)),this.listenTo(this.searchResults,"sync",function(t){return function(){return t.hideLoader()}}(this)),this.listenTo(this.searchResults,"unauthorized",function(t){return function(){return t.trigger("unauthorized")}}(this)),this.listenTo(this.searchResults,"request:failed",function(t){return function(e){return t.trigger("request:failed",e)}}(this))},e.prototype.initFacets=function(t){var e;return null==t&&(t={}),this.facets=new u.Facets({viewMap:t,config:this.config}),e=this.el.querySelector(".facets-placeholder"),e.parentNode.replaceChild(this.facets.el,e),this.listenTo(this.facets,"change",function(t){return function(e,n){return t.queryOptions.set(e,n)}}(this))},e.prototype.showLoader=function(){var t,e;return e=this.el.querySelector(".overlay"),"block"===e.style.display?!1:(t=function(t){return function(){var n,r,i,s,o;return n=t.el.querySelector(".faceted-search"),r=l(n).boundingBox(),i=r.left+r.width/2-12+"px",o=r.top+r.height/2-12+"px",r.height>window.innerHeight&&(o="50vh"),s=e.children[0],s.style.left=i,s.style.top=o,e.style.width=r.width+"px",e.style.height=r.height+"px",e.style.display="block"}}(this),setTimeout(t,0))},e.prototype.hideLoader=function(){return this.el.querySelector(".overlay").style.display="none"},e.prototype.update=function(){var t;return t=this.searchResults.getCurrent().get("facets"),1===this.searchResults.length?this.facets.renderFacets(t):this.searchResults.length>1?this.facets.update(t):void 0},e.prototype.page=function(t,e){return this.searchResults.page(t,e)},e.prototype.next=function(){return this.searchResults.moveCursor("_next")},e.prototype.prev=function(){return this.searchResults.moveCursor("_prev")},e.prototype.hasNext=function(){return this.searchResults.getCurrent().has("_next")},e.prototype.hasPrev=function(){return this.searchResults.getCurrent().has("_prev")},e.prototype.sortResultsBy=function(t){return this.queryOptions.set({sortParameters:t,resultFields:p.pluck(t,"fieldname")})},e.prototype.reset=function(t){return null==t&&(t=!1),null!=this.textSearch&&this.textSearch.reset(),null!=this.results&&this.results.reset(),this.facets.reset(),this.queryOptions.reset(),t||this.searchResults.clearCache(),this.search({cache:t})},e.prototype.refresh=function(t){return null==t&&(t={}),Object.keys(t).length>0&&this.queryOptions.set(t,{silent:!0}),this.search({cache:!1})},e.prototype.search=function(t){return this.searchResults.runQuery(this.queryOptions.attributes,t)},e.prototype.searchValue=function(t,e){var n,r,i;this.queryOptions.reset(),i=this.facets.views;for(n in i)r=i[n],r instanceof u.ListFacet&&r.revert();return this.$('.facet[data-name="'+t+'"] li[data-value="'+e+'"]').click()},e}(r.View),e.exports=s},{"../jade/main.jade":45,"./collections/searchresults":12,"./config":13,"./models/query-options":21,"./views/facets":24,"./views/facets/list":27,"./views/results":31,"./views/text-search":37,"funcky.el":6}],15:[function(t,e){var n,r,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r={Facet:t("./main")},n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.set=function(t,n){return"options"===t?n=this.parseOptions(n):t.hasOwnProperty("options")&&(t.options=this.parseOptions(t.options)),e.__super__.set.call(this,t,n)},e.prototype.parseOptions=function(t){var e;return t=null!=(e=this.get("options"))?e:t,1===t.length&&t.push({name:(!JSON.parse(t[0].name)).toString(),count:0}),t},e}(r.Facet),e.exports=n},{"./main":19}],16:[function(){},{}],17:[function(t,e){var n,r,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r={Facet:t("./main")},n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e}(r.Facet),e.exports=n},{"./main":19}],18:[function(t,e){var n,r,i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("backbone"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.idAttribute="name",e.prototype.defaults=function(){return{name:"",count:0,total:0,checked:!1,visible:!1}},e.prototype.parse=function(t){return t.total=t.count,t},e}(n.Model),e.exports=r},{}],19:[function(t,e){var n,r,i,s={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("backbone"),i=t("../../config"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.idAttribute="name",e.prototype.defaults=function(){return{name:null,title:null,type:null,options:null}},e}(n.Model),e.exports=r},{"../../config":13}],20:[function(t,e){var n,r,i,s=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./main"),i=t("underscore"),r=function(t){function e(){return this.dragMax=s(this.dragMax,this),this.dragMin=s(this.dragMin,this),e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.defaults=function(){return i.extend({},e.__super__.defaults.apply(this,arguments),{min:null,max:null,currentMin:null,currentMax:null,handleMinLeft:null,handleMaxLeft:null,sliderWidth:null,options:{}})},e.prototype.initialize=function(){return this.on("change:currentMin",function(t){return function(e,n){return t.set({handleMinLeft:t.getLeftFromYear(n)})}}(this)),this.on("change:currentMax",function(t){return function(e,n){return t.set({handleMaxLeft:t.getLeftFromYear(n)})}}(this)),this.on("change:handleMinLeft",function(t){return function(e,n){return t.set({currentMin:t.getYearFromLeft(n)})}}(this)),this.on("change:handleMaxLeft",function(t){return function(e,n){return t.set({currentMax:t.getYearFromLeft(n)})}}(this))},e.prototype.set=function(t){return t.hasOwnProperty("currentMin")&&t.currentMin>this.get("currentMax")&&(t.currentMax=+t.currentMin,t.currentMin=this.get("currentMax")),t.hasOwnProperty("currentMax")&&t.currentMax<this.get("currentMin")&&(t.currentMin=+t.currentMax,t.currentMax=this.get("currentMin")),t.hasOwnProperty("currentMin")&&t.currentMin<this.get("min")&&(t.currentMin=this.get("min")),t.hasOwnProperty("currentMax")&&t.currentMax>this.get("max")&&(t.currentMax=this.get("max")),e.__super__.set.apply(this,arguments)},e.prototype.parse=function(t){var n,r,i;return e.__super__.parse.apply(this,arguments),n=function(t){if(8===t.length)t=t.substr(0,4);else{if(7!==t.length)throw new Error("RangeFacet: lower or upper limit string is not 7 or 8 chars!");t=t.substr(0,3)}return+t},r=t.options[0].lowerLimit+"",i=t.options[0].upperLimit+"",t.min=t.currentMin=t.options.lowerLimit=n(r),t.max=t.currentMax=t.options.upperLimit=n(i),t},e.prototype.getLeftFromYear=function(t){var e,n,r,i;return n=this.get("options").lowerLimit,i=this.get("options").upperLimit,r=this.get("sliderWidth"),e=this.get("handleWidth")/2,(t-n)/(i-n)*r-e},e.prototype.getYearFromLeft=function(t){var e,n,r,i;return n=this.get("options").lowerLimit,i=this.get("options").upperLimit,e=this.get("handleWidth")/2,r=this.get("sliderWidth"),(t+e)/r*(i-n)+n},e.prototype.dragMin=function(t){return t>-1&&t<=this.get("handleMaxLeft")?this.set({handleMinLeft:t}):void 0},e.prototype.dragMax=function(t){return this.get("handleMinLeft")<t&&t<=this.get("sliderWidth")?this.set({handleMaxLeft:t}):void 0},e}(n),e.exports=r},{"./main":19}],21:[function(t,e){var n,r,i,s,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("backbone"),s=t("underscore"),i=t("../config"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.defaults=function(){return{facetValues:[],sortParameters:[]}},e.prototype.initialize=function(t){this.initialAttributes=t},e.prototype.set=function(t,n){var r;return null!=t.facetValue&&(r=s.reject(this.get("facetValues"),function(e){return e.name===t.facetValue.name}),null!=t.facetValue.values?t.facetValue.values.length>0&&r.push(t.facetValue):r.push(t.facetValue),t.facetValues=r,delete t.facetValue),e.__super__.set.call(this,t,n)},e.prototype.reset=function(){return this.clear({silent:!0}),this.set(this.defaults(),{silent:!0}),this.set(this.initialAttributes,{silent:!0})},e}(n.Model),e.exports=r},{"../config":13}],22:[function(t,e){var n,r,i,s={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("backbone"),i=t("underscore"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.defaults=function(){return{term:"*",caseSensitive:!1,fuzzy:!1,title:"Text Search",name:"text_search"}},e.prototype.queryData=function(){var t;return t=i.extend({},this.attributes),delete t.name,delete t.title,t},e}(n.Model),e.exports=r},{}],23:[function(t,e){var n,r,i,s,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("backbone"),s=t("underscore"),i=t("../config"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.defaults=function(){return{_next:null,_prev:null,ids:[],numFound:null,results:[],rows:null,solrquery:"",sortableFields:[],start:null,term:"",facets:[]}},e}(n.Model),e.exports=r},{"../config":13}],24:[function(t,e){var n,r,i,s,o,a=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("backbone"),o=t("underscore"),n=t("jquery"),s=t("assert"),i=function(e){function i(){return this.renderFacet=a(this.renderFacet,this),i.__super__.constructor.apply(this,arguments)}return l(i,e),i.prototype.className="facets",i.prototype.viewMap={BOOLEAN:t("./facets/boolean"),DATE:t("./facets/date"),RANGE:t("./facets/range"),LIST:t("./facets/list")},i.prototype.initialize=function(t){return this.options=t,o.extend(this.viewMap,this.options.viewMap),this.views={},this.render()},i.prototype.render=function(){var t;return this.options.config.get("templates").hasOwnProperty("facets")&&(t=this.options.config.get("templates").facets,this.el.innerHTML=t()),this},i.prototype.renderFacets=function(t){var e,n,i,o,a,u,l,c,p,h,f,d;if(this.destroyFacets(),this.options.config.get("templates").hasOwnProperty("facets"))for(u=c=0,h=t.length;h>c;u=++c)n=t[u],this.viewMap.hasOwnProperty(n.type)&&(l=this.el.querySelector("."+n.name+"-placeholder"),null!=l&&l.parentNode.replaceChild(this.renderFacet(n).el,l));else{for(o=new r.Collection(t,{model:r.Model.extend({idAttribute:"name"})}),0===this.options.config.get("facetOrder").length&&this.options.config.set({facetOrder:o.pluck("name")}),a=document.createDocumentFragment(),d=this.options.config.get("facetOrder"),p=0,f=d.length;f>p;p++)i=d[p],s.ok(null!=o.get(i),'FacetedSearch :: Facets : Unknown facet name: "'+i+'"!'),e=o.get(i),this.viewMap.hasOwnProperty(e.get("type"))?(a.appendChild(this.renderFacet(e.attributes).el),a.appendChild(document.createElement("hr"))):console.error("Unknown facetView",e.get("type"));this.el.innerHTML="",this.el.appendChild(a)}return this},i.prototype.renderFacet=function(t){var e;return o.isString(t)&&(t=o.findWhere(this.searchResults.first().get("facets"),{name:t})),e=this.viewMap[t.type],this.views[t.name]=new e({attrs:t,config:this.options.config}),this.listenTo(this.views[t.name],"change",function(t){return function(e,n){return null==n&&(n={}),t.trigger("change",e,n)}}(this)),this.views[t.name]},i.prototype.update=function(t){var e,n,r,i,s,a;s=this.views,a=[];for(i in s)u.call(s,i)&&(r=s[i],e=o.findWhere(t,{name:i}),n=null!=e?e.options:[],a.push(r.update(n)));return a},i.prototype.reset=function(){var t,e,n,r;n=this.views,r=[];for(e in n)u.call(n,e)&&(t=n[e],r.push("function"==typeof t.reset?t.reset():void 0));return r},i.prototype.destroyFacets=function(){var t,e,n,r;this.stopListening(),n=this.views,r=[];for(e in n)u.call(n,e)&&(t=n[e],t.destroy(),r.push(delete this.views[e]));return r},i.prototype.destroy=function(){return this.destroyFacets(),this.remove()},i.prototype.toggle=function(t){var e,r,i,s,a,u,l;return t.preventDefault(),r=n(t.currentTarget).find("i.fa"),u=n(t.currentTarget).find("span"),s=r.hasClass("fa-expand"),r.toggleClass("fa-compress"),r.toggleClass("fa-expand"),l=s?"Collapse":"Expand",u.text(""+l+" filters"),e=o.keys(this.views),i=0,(a=function(t){return function(){var n,r;return r=e[i++],n=t.views[r],null!=n?s?n.showBody(function(){return a()}):n.hideBody(function(){return a()}):void 0}}(this))()},i}(r.View),e.exports=i},{"./facets/boolean":25,"./facets/date":26,"./facets/list":27,"./facets/range":30,assert:1}],25:[function(t,e){var n,r,i,s,o,a,u={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("jquery"),a=t("underscore"),i={Boolean:t("../../models/facets/boolean")},s={Facet:t("./main")},o=t("../../../jade/facets/boolean.body.jade"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.className="facet boolean",e.prototype.initialize=function(t){return e.__super__.initialize.apply(this,arguments),this.model=new i.Boolean(t.attrs,{parse:!0}),this.listenTo(this.model,"change:options",this.render),this.render()},e.prototype.render=function(){var t;return e.__super__.render.apply(this,arguments),t=o(a.extend(this.model.attributes,{ucfirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}})),this.$(".body").html(t),this.$("header i.fa").remove(),this},e.prototype.events=function(){return a.extend({},e.__super__.events.apply(this,arguments),{"click i":"checkChanged","click label":"checkChanged"})},e.prototype.checkChanged=function(t){var e,r,i,s,o,u;for(e="LABEL"===t.currentTarget.tagName?this.$('i[data-value="'+t.currentTarget.getAttribute("data-value")+'"]'):n(t.currentTarget),e.toggleClass("fa-square-o"),e.toggleClass("fa-check-square-o"),i=e.attr("data-value"),u=this.model.get("options"),s=0,o=u.length;o>s;s++)r=u[s],r.name===i&&(r.checked=e.hasClass("fa-check-square-o"));return this.trigger("change",{facetValue:{name:this.model.get("name"),values:a.map(this.$("i.fa-check-square-o"),function(t){return t.getAttribute("data-value")})}})},e.prototype.update=function(t){return this.model.set("options",t)},e.prototype.reset=function(){return this.render()},e}(s.Facet),e.exports=r},{"../../../jade/facets/boolean.body.jade":38,"../../models/facets/boolean":15,"./main":29}],26:[function(t,e){var n,r,i,s,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r={Date:t("../../models/facets/date")},i={Facet:t("./main")},s=t("../../../jade/facets/date.jade"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.className="facet date",e.prototype.initialize=function(t){return e.__super__.initialize.apply(this,arguments),this.model=new r.Date(t.attrs,{parse:!0}),this.listenTo(this.model,"change:options",this.render),this.render()},e.prototype.render=function(){var t;return e.__super__.render.apply(this,arguments),t=s(_.extend(this.model.attributes,{ucfirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}})),this.$(".placeholder").html(t),this},e.prototype.update=function(){},e.prototype.reset=function(){},e}(i.Facet),e.exports=n},{"../../../jade/facets/date.jade":39,"../../models/facets/date":16,"./main":29}],27:[function(t,e){var n,r,i,s,o,a,u,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("jquery"),u=t("underscore"),s={List:t("../../models/facets/list")},r={Options:t("../../collections/list.options")},o={Facet:t("./main"),Options:t("./list.options")},a=t("../../../jade/facets/list.menu.jade"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.className="facet list",e.prototype.initialize=function(t){return e.__super__.initialize.apply(this,arguments),this.resetActive=!1,this.config=t.config,this.model=new s.List(t.attrs,{parse:!0}),this.collection=new r.Options(t.attrs.options,{parse:!0}),this.render()},e.prototype.render=function(){var t;return e.__super__.render.apply(this,arguments),this.$("header .options").length>0&&(this.config.get("templates").hasOwnProperty("list.menu")&&(a=this.config.get("templates")["list.menu"]),t=a({model:this.model.attributes}),this.$("header .options").html(t)),this.optionsView=new o.Options({collection:this.collection,facetName:this.model.get("name"),config:this.config}),this.$(".body").html(this.optionsView.el),this.listenTo(this.optionsView,"filter:finished",this.renderFilteredOptionCount),this.listenTo(this.optionsView,"change",function(t){return function(e){return t.trigger("change",e)}}(this)),this.collection.length<=3&&this.$("header i.openclose").hide(),this},e.prototype.renderFilteredOptionCount=function(){var t,e,n,r;return n=this.collection.filter(function(t){return t.get("visible")}),e=0<(r=n.length)&&21>r?"visible":"hidden",this.$('input[type="checkbox"][name="all"]').css("visibility",e),t=this.collection.filter(function(t){return t.get("visible")}),0===t.length||t.length===this.collection.length?this.$('header .options input[name="filter"]').addClass("nonefound"):this.$('header .options input[name="filter"]').removeClass("nonefound"),this.$("header small.optioncount").html(t.length+" of "+this.collection.length),this},e.prototype.events=function(){return u.extend({},e.__super__.events.apply(this,arguments),{'keyup input[name="filter"]':function(t){return this.optionsView.filterOptions(t.currentTarget.value)},'change header .options input[type="checkbox"][name="all"]':function(t){return this.optionsView.setCheckboxes(t)},"click header .menu i.filter":"toggleFilterMenu","click header .menu i.alpha":"changeOrder","click header .menu i.amount":"changeOrder"})},e.prototype.toggleFilterMenu=function(){var t,e;return e=this.$("header .options"),t=this.$("i.filter"),t.toggleClass("active"),e.slideToggle(150,function(n){return function(){var r;return r=e.find('input[name="filter"]'),t.hasClass("active")?(r.focus(),n.optionsView.appendOptions(!0),n.renderFilteredOptionCount()):(r.val(""),n.collection.setAllVisible())}}(this))},e.prototype.changeOrder=function(t){var e,r,i;return this.$("i.filter").hasClass("active")||this.optionsView.renderAll(),e=n(t.currentTarget),e.hasClass("active")?e.hasClass("alpha")?(e.toggleClass("fa-sort-alpha-desc"),e.toggleClass("fa-sort-alpha-asc")):e.hasClass("amount")&&(e.toggleClass("fa-sort-amount-desc"),e.toggleClass("fa-sort-amount-asc")):(this.$("i.amount.active").removeClass("active"),this.$("i.alpha.active").removeClass("active"),e.addClass("active")),i=e.hasClass("alpha")?"alpha":"amount",r=e.hasClass("fa-sort-"+i+"-desc")?"desc":"asc",this.collection.orderBy(i+"_"+r)},e.prototype.update=function(t){return this.resetActive?(this.collection.reset(t,{parse:!0}),this.resetActive=!1):this.collection.updateOptions(t)},e.prototype.reset=function(){return this.resetActive=!0,this.$("i.filter").hasClass("active")?this.toggleFilterMenu():void 0},e.prototype.revert=function(){return this.$("i.filter").hasClass("active")&&this.toggleFilterMenu(),this.collection.revert(),this.collection.sort()},e}(o.Facet),e.exports=i},{"../../../jade/facets/list.menu.jade":41,"../../collections/list.options":11,"../../models/facets/list":17,"./list.options":28,"./main":29}],28:[function(t,e){var n,r,i,s,o,a,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("backbone"),n=t("jquery"),l=t("underscore"),a=t("funcky.util"),s={List:t("../../models/facets/list")},o=t("../../../jade/facets/list.body.jade"),u=t("../../../jade/facets/list.option.jade"),i=function(t){function e(){return this.triggerChange=c(this.triggerChange,this),e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.className="container",e.prototype.initialize=function(t){return this.config=t.config,this.facetName=t.facetName,this.listenTo(this.collection,"sort",function(t){return function(){return t.rerender()}}(this)),this.listenTo(this.collection,"reset",function(t){return function(){return t.collection.orderBy("amount_desc",!0),t.render()}}(this)),this.config.get("templates").hasOwnProperty("list.option")&&(u=this.config.get("templates")["list.option"]),this.render()},e.prototype.render=function(){return this.showingCursor=0,this.showingIncrement=50,this.config.get("templates").hasOwnProperty("list.body")&&(o=this.config.get("templates")["list.body"]),this.$el.html(o({facetName:this.facetName})),this.appendOptions(),this},e.prototype.rerender=function(){var t,e,n,r;for(n="",t=0,e=this.collection.at(t),r=e.get("visible");r;)n+=u({option:e}),t+=1,e=this.collection.at(t),r=null!=e&&e.get("visible")?!0:!1;return this.el.querySelector("ul").innerHTML=n},e.prototype.appendOptions=function(t){var e,n;for(null==t&&(t=!1),t&&(this.showingIncrement=this.collection.length),n="";this.showingCursor<this.showingIncrement&&this.showingCursor<this.collection.length;)e=this.collection.at(this.showingCursor),e.set("visible",!0),n+=u({option:e}),this.showingCursor=this.showingCursor+1;return this.$("ul").append(n)},e.prototype.renderAll=function(){return this.collection.setAllVisible()},e.prototype.events=function(){return{"click li":"checkChanged",scroll:"onScroll"}},e.prototype.onScroll=function(t){var e,n;return this.showingCursor<this.collection.length&&(e=t.currentTarget,n=e.scrollTop/e.scrollHeight,n>this.showingCursor/2/this.collection.length)?(this.showingIncrement+=this.showingIncrement,this.appendOptions()):void 0},e.prototype.checkChanged=function(t){var e,r;return e=n(t.currentTarget),r=e.attr("data-value"),e.toggleClass("checked"),this.collection.get(r).set("checked",e.hasClass("checked")),0!==this.$("li.checked").length&&this.config.get("autoSearch")?a.setResetTimeout(1e3,function(t){return function(){return t.triggerChange()}}(this)):this.triggerChange()},e.prototype.triggerChange=function(t){var e;return null==t&&(e=this.collection.filter(function(t){return t.get("checked")}),t=l.map(e,function(t){return t.get("name")})),this.trigger("change",{facetValue:{name:this.facetName,values:t}})},e.prototype.filterOptions=function(t){return this.collection.map(function(e){var n;return n=new RegExp(t,"i"),e.set("visible",n.test(e.id))}),this.collection.sort(),this.trigger("filter:finished")},e.prototype.setCheckboxes=function(t){var e,n,r,i,s;for(r=this.collection.filter(function(t){return t.get("visible")}),i=0,s=r.length;s>i;i++)e=r[i],e.set("checked",t.currentTarget.checked);return t.currentTarget.checked?(n=l.map(r,function(t){return t.get("name")}),this.triggerChange(n)):this.triggerChange()},e}(r.View),e.exports=i},{"../../../jade/facets/list.body.jade":40,"../../../jade/facets/list.option.jade":42,"../../models/facets/list":17,"funcky.util":8}],29:[function(t,e){var n,r,i,s,o,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("backbone"),n=t("jquery"),o=t("underscore"),s=t("../../../jade/facets/main.jade"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(t){return this.config=t.config,this.config.get("facetTitleMap").hasOwnProperty(t.attrs.name)?t.attrs.title=this.config.get("facetTitleMap")[t.attrs.name]:void 0},e.prototype.render=function(){return this.config.get("templates").hasOwnProperty("facets.main")&&(s=this.config.get("templates")["facets.main"]),this.$el.html(s(this.model.attributes)),this.$el.attr("data-name",this.model.get("name")),this},e.prototype.events=function(){return{"click h3":"toggleBody"}},e.prototype.toggleBody=function(t){var e;return e=this.$(".body").is(":visible")?this.hideBody:this.showBody,o.isFunction(t)?e.call(this,t):e.call(this)},e.prototype.hideMenu=function(){var t;return t=this.$("header i.openclose"),t.addClass("fa-plus-square-o"),t.removeClass("fa-minus-square-o"),this.$("header .options").slideUp(150)},e.prototype.hideBody=function(t){return this.hideMenu(),this.$(".body").slideUp(100,function(e){return function(){return null!=t&&t(),e.$("header i.fa").fadeOut(100)}}(this))},e.prototype.showBody=function(t){return this.$(".body").slideDown(100,function(e){return function(){return null!=t&&t(),e.$("header i.fa").fadeIn(100)}}(this))},e.prototype.destroy=function(){return this.remove()},e.prototype.update=function(){},e.prototype.reset=function(){},e}(r.View),e.exports=i},{"../../../jade/facets/main.jade":43}],30:[function(t,e){var n,r,i,s,o,a,u,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("jquery"),l=t("underscore"),r={Range:t("../../models/facets/range")},s={Facet:t("./main")},o=t("../../../jade/facets/range.body.jade"),a=null,u=null,i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.className="facet range",e.prototype.initialize=function(t){return e.__super__.initialize.apply(this,arguments),this.config=t.config,this.draggingMin=!1,this.draggingMax=!1,this.model=new r.Range(t.attrs,{parse:!0}),this.listenTo(this.model,"change:options",this.render),this.listenTo(this.model,"change",function(t){return function(e){return(e.changed.hasOwnProperty("currentMin")||e.changed.hasOwnProperty("currentMax"))&&null!=t.button&&t.config.get("autoSearch")?t.button.style.display="block":void 0}}(this)),this.listenTo(this.model,"change:handleMinLeft",function(t){return function(e,n){return t.handleMin.css("left",n),t.bar.css("left",n)}}(this)),this.listenTo(this.model,"change:handleMaxLeft",function(t){return function(e,n){return t.handleMax.css("left",n),t.bar.css("right",e.get("sliderWidth")-n)}}(this)),this.listenTo(this.model,"change:currentMin",function(t){return function(e,n){return t.inputMin.val(Math.ceil(n))}}(this)),this.listenTo(this.model,"change:currentMax",function(t){return function(e,n){return t.inputMax.val(Math.ceil(n))}}(this)),this.render()},e.prototype.render=function(){var t;return e.__super__.render.apply(this,arguments),this.config.get("templates").hasOwnProperty("range.body")&&(o=this.config.get("templates")["range.body"]),t=o(this.model.attributes),this.$(".body").html(t),this.$("header .menu").hide(),a=this.stopDragging.bind(this),this.$el.on("mouseleave",a),u=this.onResize.bind(this),window.addEventListener("resize",u),setTimeout(function(t){return function(){return t.postRender()}}(this),0),this},e.prototype.postRender=function(){var t;return this.handleMin=this.$(".handle-min"),this.handleMax=this.$(".handle-max"),this.inputMin=this.$("input.min"),this.inputMax=this.$("input.max"),this.bar=this.$(".bar"),this.button=this.el.querySelector("button"),t=this.$(".slider"),this.model.set({sliderWidth:t.width(),sliderLeft:t.offset().left,handleMinLeft:this.handleMin.position().left,handleMaxLeft:this.handleMax.position().left,handleWidth:this.handleMin.width()})},e.prototype.events=function(){return l.extend({},e.__super__.events.apply(this,arguments),{"mousedown .handle":"startDragging","mousedown .bar":"startDragging",mouseup:"stopDragging",mousemove:"drag","blur input":"setYear","keyup input":"setYear","click button":"doSearch","dblclick input.min":function(){return this.enableInputEditable(this.inputMin)},"dblclick input.max":function(){return this.enableInputEditable(this.inputMax)}})},e.prototype.setYear=function(t){if("focusout"===t.type||"blur"===t.type||"keyup"===t.type&&13===t.keyCode){if(t.currentTarget.className.indexOf("min")>-1)return this.model.set({currentMin:+t.currentTarget.value}),this.disableInputEditable(this.inputMin);if(t.currentTarget.className.indexOf("max")>-1)return this.model.set({currentMax:+t.currentTarget.value}),this.disableInputEditable(this.inputMax)}},e.prototype.doSearch=function(t){return t.preventDefault(),this.triggerChange()},e.prototype.startDragging=function(t){var e,r;return r=n(t.currentTarget),e=r.find("input"),e.length>0&&null==e.attr("disabled")?void 0:r.hasClass("handle-min")?(this.draggingMin=!0,this.handleMax.css("z-index",10),r.css("z-index",11)):r.hasClass("handle-max")?(this.draggingMax=!0,this.handleMin.css("z-index",10),r.css("z-index",11)):r.hasClass("bar")?this.draggingBar={offsetLeft:t.clientX-this.model.get("sliderLeft")-this.model.get("handleMinLeft"),barWidth:this.bar.width()}:void 0
},e.prototype.drag=function(t){var e,n,r;return n=t.clientX-this.model.get("sliderLeft"),(this.draggingMin||this.draggingMax)&&(this.disableInputOverlap(),this.checkInputOverlap()),null!=this.draggingBar&&(this.updateDash(),e=n-this.draggingBar.offsetLeft,r=e+this.draggingBar.barWidth,e>-1&&r<=this.model.get("sliderWidth")&&(this.model.dragMin(e),this.model.dragMax(r))),this.draggingMin&&this.model.dragMin(n-this.model.get("handleWidth")/2),this.draggingMax?this.model.dragMax(n-this.model.get("handleWidth")/2):void 0},e.prototype.stopDragging=function(){return!this.draggingMin&&!this.draggingMax&&null==this.draggingBar||(this.draggingMin&&this.model.get("currentMin")!==+this.inputMin.val()&&this.model.set({currentMin:+this.inputMin.val()}),this.draggingMax&&this.model.get("currentMax")!==+this.inputMax.val()&&this.model.set({currentMax:+this.inputMax.val()}),this.draggingMin=!1,this.draggingMax=!1,this.draggingBar=null,this.config.get("autoSearch"))?void 0:this.triggerChange({silent:!0})},e.prototype.enableInputEditable=function(t){return t.attr("disabled",null),t.focus()},e.prototype.disableInputEditable=function(t){return t.attr("disabled",!0)},e.prototype.destroy=function(){return this.$el.off("mouseleave",a),window.removeEventListener("resize",u),this.remove()},e.prototype.triggerChange=function(t){var e;return null==t&&(t={}),e={facetValue:{name:this.model.get("name"),lowerLimit:this.model.get("currentMin")+"0101",upperLimit:this.model.get("currentMax")+"1231"}},this.trigger("change",e,t)},e.prototype.onResize=function(){return this.postRender(),this.update({lowerLimit:this.model.get("currentMin"),upperLimit:this.model.get("currentMax")}),this.checkInputOverlap()},e.prototype.checkInputOverlap=function(){var t,e,n;return n=this.inputMin[0].getBoundingClientRect(),e=this.inputMax[0].getBoundingClientRect(),n.right<e.left||n.left>e.right||n.bottom<e.top||n.top>e.bottom?this.disableInputOverlap():(t=n.right-e.left,this.enableInputOverlap(t))},e.prototype.enableInputOverlap=function(t){return this.inputMin.css("left",-20-t/2),this.inputMax.css("right",-20-t/2),this.updateDash(),this.$(".dash").show(),this.inputMin.addClass("overlap"),this.inputMax.addClass("overlap")},e.prototype.disableInputOverlap=function(){return this.inputMin.css("left",-20),this.inputMax.css("right",-20),this.$(".dash").hide(),this.inputMin.removeClass("overlap"),this.inputMax.removeClass("overlap")},e.prototype.updateDash=function(){return this.$(".dash").css("left",this.model.get("handleMinLeft")+(this.model.get("handleMaxLeft")-this.model.get("handleMinLeft"))/2+3)},e.prototype.update=function(t){return l.isArray(t)&&(t=null!=t[0]?t[0]:{lowerLimit:this.model.get("options").lowerLimit,upperLimit:this.model.get("options").upperLimit}),this.model.set({currentMin:+(t.lowerLimit+"").substr(0,4),currentMax:+(t.upperLimit+"").substr(0,4)}),null!=this.button?this.button.style.display="none":void 0},e}(s.Facet),e.exports=i},{"../../../jade/facets/range.body.jade":44,"../../models/facets/range":20,"./main":29}],31:[function(t,e){var n,r,i,s,o,a,u,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("backbone"),n=t("jquery"),u=t("underscore"),s={Result:t("./result"),SortLevels:t("./sort"),Pagination:t("hibb-pagination")},a=t("./index.jade"),o=[],i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(t){return this.options=null!=t?t:{},this.resultItems=[],this.isMetadataVisible=!0,this.listenTo(this.options.searchResults,"change:page",this.renderResultsPage),this.listenTo(this.options.searchResults,"change:results",function(t){return function(e){return t.$("header h3.numfound").html("Found "+e.get("numFound")+" "+t.options.config.get("entryTermPlural")),t.renderPagination(e),t.renderResultsPage(e)}}(this)),this.subviews={},this.render()},e.prototype.render=function(){return this.$el.html(a({resultsPerPage:this.options.config.get("resultRows")})),this.renderLevels(),n(window).resize(function(t){return function(){var e;return e=t.$("div.pages"),e.height(n(window).height()-e.offset().top)}}(this)),this},e.prototype.renderLevels=function(){return null!=this.subviews.sortLevels&&this.subviews.sortLevels.destroy(),this.subviews.sortLevels=new s.SortLevels({levels:this.options.config.get("levels"),entryMetadataFields:this.options.config.get("entryMetadataFields")}),this.$("header nav ul").prepend(this.subviews.sortLevels.$el),this.listenTo(this.subviews.sortLevels,"change",function(t){return function(e){return t.trigger("change:sort-levels",e)}}(this))},e.prototype.renderResultsPage=function(t){var e,r,i,o,a,u,l,c;for(this.destroyResultItems(),this.$("div.pages").html(""),r=t.has("term")&&-1===t.get("term").indexOf("*:*")&&-1===t.get("term").indexOf("*"),e=document.createDocumentFragment(),c=t.get("results"),u=0,l=c.length;l>u;u++)o=c[u],o=new s.Result({data:o,fulltext:r,config:this.options.config}),this.resultItems.push(o),this.listenTo(o,"click",function(t){return this.trigger("result:click",t)}),this.listenTo(o,"layer:click",function(t,e){return this.trigger("result:layer-click",t,e)}),e.appendChild(o.el);return i=this.subviews.pagination.getCurrentPageNumber(),a=n('<ul class="page" data-page-number="'+i+'" />'),a.html(e),this.$("div.pages").append(a)},e.prototype.renderPagination=function(t){return null!=this.subviews.pagination&&(this.stopListening(this.subviews.pagination),this.subviews.pagination.destroy()),this.subviews.pagination=new s.Pagination({resultsStart:t.get("start"),resultsPerPage:this.options.config.get("resultRows"),resultsTotal:t.get("numFound")}),this.listenTo(this.subviews.pagination,"change:pagenumber",this.changePage),this.$("header .pagination").html(this.subviews.pagination.el)},e.prototype.changePage=function(t){var e,n;return n=this.$("div.pages"),n.find("ul.page").hide(),e=n.find('ul.page[data-page-number="'+t+'"]'),e.length>0?e.show():this.options.searchResults.page(t)},e.prototype.events=function(){return{"change li.show-metadata input":"showMetadata","change li.results-per-page select":"onChangeResultsPerPage"}},e.prototype.onChangeResultsPerPage=function(t){var e;return e=t.currentTarget,this.options.config.set("resultRows",e.options[e.selectedIndex].value)},e.prototype.showMetadata=function(t){return this.isMetadataVisible=t.currentTarget.checked,this.$(".metadata").toggle(this.isMetadataVisible)},e.prototype.reset=function(){return this.renderLevels()},e.prototype.destroy=function(){return this.destroyResultItems(),this.subviews.sortLevels.destroy()},e.prototype.destroyResultItems=function(){var t,e,n,r,i;for(r=this.resultItems,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(t.destroy());return i},e}(r.View),e.exports=i},{"./index.jade":32,"./result":33,"./sort":35,"hibb-pagination":9}],32:[function(t,e){var n=t("jade/runtime");e.exports=function(t){var e,r=[],i=t||{};return function(t){r.push('<header><h3 class="numfound"></h3><nav><ul><li class="results-per-page"><select name="results-per-page">'),function(){var i=[10,25,50,100,250,500,1e3];if("number"==typeof i.length)for(var s=0,o=i.length;o>s;s++){var a=i[s];r.push("<option"+n.attr("value",a,!0,!1)+n.attr("selected",a===t,!0,!1)+">"+n.escape(null==(e=a+" results")?"":e)+"</option>")}else{var o=0;for(var s in i){o++;var a=i[s];r.push("<option"+n.attr("value",a,!0,!1)+n.attr("selected",a===t,!0,!1)+">"+n.escape(null==(e=a+" results")?"":e)+"</option>")}}}.call(this),r.push('</select></li><li class="select-all"><input id="i9d8sdf" type="checkbox"/><label for="i9d8sdf">Select all</label></li><li class="show-metadata"><input id="o45hes3" type="checkbox" checked="checked"/><label for="o45hes3">Show metadata</label></li></ul></nav><div class="pagination"></div></header><div class="pages"></div>')}("resultsPerPage"in i?i.resultsPerPage:"undefined"!=typeof resultsPerPage?resultsPerPage:void 0),r.join("")}},{"jade/runtime":10}],33:[function(t,e){var n,r,i,s={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("backbone"),i=t("./result.jade"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.className="result",e.prototype.tagName="li",e.prototype.initialize=function(t){var e;return this.options=null!=t?t:{},null==(e=this.options).fulltext&&(e.fulltext=!1),this.$el.addClass(this.options.fulltext?"fulltext":"no-fulltext"),this.render()},e.prototype.render=function(){var t,e,n,r,o;e=[],o=this.options.data.terms;for(r in o)s.call(o,r)&&(t=o[r],e.push(""+t+"x "+r));return this.options.config.get("templates").hasOwnProperty("result")&&(i=this.options.config.get("templates").result),n=i({data:this.options.data,fulltext:this.options.fulltext,found:e.join(", ")}),this.$el.html(n),this},e.prototype.events=function(){return{click:"_handleClick","click li[data-layer]":"_handleLayerClick"}},e.prototype._handleClick=function(){return this.trigger("click",this.options.data)},e.prototype._handleLayerClick=function(t){var e;return t.stopPropagation(),e=t.currentTarget.getAttribute("data-layer"),this.trigger("layer:click",e,this.options.data)},e.prototype.destroy=function(){return this.remove()},e}(n.View),e.exports=r},{"./result.jade":34}],34:[function(t,e){var n=t("jade/runtime");e.exports=function(t){var e,r=[],i=t||{};return function(t,i,s){t.metadata="undefined"!=typeof t.metadata?t.metadata:[],r.push('<div class="title">'+n.escape(null==(e=t.name)?"":e)+'</div><div class="metadata"><ul>'),function(){var i=t.metadata;if("number"==typeof i.length)for(var s=0,o=i.length;o>s;s++){var a=i[s];r.push('<li><span class="key">'+n.escape(null==(e=s+": ")?"":e)+'</span><span class="value">'+n.escape(null==(e=a)?"":e)+"</span></li>")}else{var o=0;for(var s in i){o++;var a=i[s];r.push('<li><span class="key">'+n.escape(null==(e=s+": ")?"":e)+'</span><span class="value">'+n.escape(null==(e=a)?"":e)+"</span></li>")}}}.call(this),r.push("</ul></div>"),i&&(r.push('<div class="found">'+n.escape(null==(e=s)?"":e)+'</div><div class="keywords"><ul>'),null!=t._kwic&&function(){var i=t._kwic;if("number"==typeof i.length)for(var s=0,o=i.length;o>s;s++){var a=i[s];r.push("<li"+n.attr("data-layer",s,!0,!1)+"><label>"+n.escape(null==(e=s)?"":e)+'</label><ul class="kwic">'),function(){var t=a;if("number"==typeof t.length)for(var n=0,i=t.length;i>n;n++){var s=t[n];r.push("<li>"+(null==(e=s)?"":e)+"</li>")}else{var i=0;for(var n in t){i++;var s=t[n];r.push("<li>"+(null==(e=s)?"":e)+"</li>")}}}.call(this),r.push("</ul></li>")}else{var o=0;for(var s in i){o++;var a=i[s];r.push("<li"+n.attr("data-layer",s,!0,!1)+"><label>"+n.escape(null==(e=s)?"":e)+'</label><ul class="kwic">'),function(){var t=a;if("number"==typeof t.length)for(var n=0,i=t.length;i>n;n++){var s=t[n];r.push("<li>"+(null==(e=s)?"":e)+"</li>")}else{var i=0;for(var n in t){i++;var s=t[n];r.push("<li>"+(null==(e=s)?"":e)+"</li>")}}}.call(this),r.push("</ul></li>")}}}.call(this),r.push("</ul></div>"))}("data"in i?i.data:"undefined"!=typeof data?data:void 0,"fulltext"in i?i.fulltext:"undefined"!=typeof fulltext?fulltext:void 0,"found"in i?i.found:"undefined"!=typeof found?found:void 0),r.join("")}},{"jade/runtime":10}],35:[function(t,e){var n,r,i,s,o,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("backbone"),n=t("jquery"),s=t("funcky.el").el,o=t("./sort.jade"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.tagName="li",e.prototype.className="sort-levels",e.prototype.initialize=function(t){return this.options=null!=t?t:{},this.render()},e.prototype.render=function(){var t,e,n;return n=o({levels:this.options.levels,entryMetadataFields:this.options.entryMetadataFields}),this.$el.html(n),this.listenTo(r,"sortlevels:update",function(t){return function(e){var n,r,i,s;for(t.options.levels=e,r=[],i=0,s=e.length;s>i;i++)n=e[i],r.push({fieldname:n,direction:"asc"});return t.trigger("change",r),t.render()}}(this)),this.listenTo(r,"entrymetadatafields:update",function(t){return function(e){return t.options.entryMetadataFields=e,t.render()}}(this)),e=this.$("div.levels"),t=function(t){return s(e[0]).hasDescendant(t.target)||e[0]===t.target?void 0:e.hide()},this.onMouseleave=t.bind(this),e.on("mouseleave",this.onMouseleave)},e.prototype.events=function(){return{"click button.toggle":"toggleLevels","click li.search button":"saveLevels","change div.levels select":"changeLevels","click div.levels i.fa":"changeAlphaSort"}},e.prototype.toggleLevels=function(){return this.$("div.levels").toggle()},e.prototype.hideLevels=function(){return this.$("div.levels").hide()},e.prototype.changeLevels=function(t){var e,n,r,i,s,o,a,u,l,c,p;for(this.$("div.levels").addClass("show-save-button"),i=t.currentTarget,l=this.el.querySelectorAll("div.levels select"),s=0,a=l.length;a>s;s++)r=l[s],r.name!==i.name&&r.value===i.value&&(r.selectedIndex=0);for(c=this.el.querySelectorAll("div.levels i.fa"),p=[],o=0,u=c.length;u>o;o++)n=c[o],e=this.$(n),e.addClass("fa-sort-alpha-asc"),p.push(e.removeClass("fa-sort-alpha-desc"));return p},e.prototype.changeAlphaSort=function(t){var e;return this.$("div.levels").addClass("show-save-button"),e=this.$(t.currentTarget),e.toggleClass("fa-sort-alpha-asc"),e.toggleClass("fa-sort-alpha-desc")},e.prototype.saveLevels=function(){var t,e,r,i,s,o,a;for(i=[],a=this.el.querySelectorAll("div.levels li[name]"),s=0,o=a.length;o>s;s++)t=a[s],e=t.querySelector("select"),r={},r.fieldname=e.options[e.selectedIndex].value,r.direction=n(t).find("i.fa").hasClass("fa-sort-alpha-asc")?"asc":"desc",i.push(r);return this.hideLevels(),this.trigger("change",i)},e.prototype.destroy=function(){return this.$("div.levels").off("mouseleave",this.onMouseleave),this.remove()},e}(r.View),e.exports=i},{"./sort.jade":36,"funcky.el":6}],36:[function(t,e){var n=t("jade/runtime");e.exports=function(t){var e,r=[],i=t||{};return function(t,i){r.push('<button class="toggle">Sort<i class="fa fa-caret-down"></i></button><div class="levels"><ul>'),function(){var s=[1,2,3];if("number"==typeof s.length)for(var o=0,a=s.length;a>o;o++){var u=s[o];r.push("<li"+n.attr("name","level"+u,!0,!1)+"><label>"+n.escape(null==(e="Level "+u)?"":e)+"</label><select"+n.attr("name","level"+u,!0,!1)+"><option></option>"),function(){var s=t;if("number"==typeof s.length)for(var o=0,a=s.length;a>o;o++){var l=s[o];r.push("<option"+n.attr("value",l,!0,!1)+n.attr("selected",l==i[u-1],!0,!1)+">"+n.escape(null==(e=l)?"":e)+"</option>")}else{var a=0;for(var o in s){a++;var l=s[o];r.push("<option"+n.attr("value",l,!0,!1)+n.attr("selected",l==i[u-1],!0,!1)+">"+n.escape(null==(e=l)?"":e)+"</option>")}}}.call(this),r.push('</select><i class="fa fa-sort-alpha-asc"></i></li>')}else{var a=0;for(var o in s){a++;var u=s[o];r.push("<li"+n.attr("name","level"+u,!0,!1)+"><label>"+n.escape(null==(e="Level "+u)?"":e)+"</label><select"+n.attr("name","level"+u,!0,!1)+"><option></option>"),function(){var s=t;if("number"==typeof s.length)for(var o=0,a=s.length;a>o;o++){var l=s[o];r.push("<option"+n.attr("value",l,!0,!1)+n.attr("selected",l==i[u-1],!0,!1)+">"+n.escape(null==(e=l)?"":e)+"</option>")}else{var a=0;for(var o in s){a++;var l=s[o];r.push("<option"+n.attr("value",l,!0,!1)+n.attr("selected",l==i[u-1],!0,!1)+">"+n.escape(null==(e=l)?"":e)+"</option>")}}}.call(this),r.push('</select><i class="fa fa-sort-alpha-asc"></i></li>')}}}.call(this),r.push('<li class="search">&nbsp;<button>Change levels</button></li></ul></div>')}("entryMetadataFields"in i?i.entryMetadataFields:"undefined"!=typeof entryMetadataFields?entryMetadataFields:void 0,"levels"in i?i.levels:"undefined"!=typeof levels?levels:void 0),r.join("")}},{"jade/runtime":10}],37:[function(t,e){var n,r,i,s,o,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("backbone"),o=t("underscore"),r={Search:t("../models/search")},s=t("../../jade/text-search.jade"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.className="text-search",e.prototype.initialize=function(t){return this.config=t.config,this.reset()},e.prototype.setModel=function(){return null!=this.model&&this.stopListening(this.model),this.model=new r.Search(this.config.get("textSearchOptions"))},e.prototype.render=function(){return this.config.get("templates").hasOwnProperty("text-search")&&(s=this.config.get("templates")["text-search"]),this.$el.html(s({model:this.model})),this},e.prototype.events=function(){return{"click i.fa-search":"search",'keyup input[name="search"]':"onKeyUp",'focus input[name="search"]':function(){return this.$(".body .menu").slideDown(150)},"click .menu .fa-times":function(){return this.$(".body .menu").slideUp(150)},'change input[type="checkbox"]':"checkboxChanged"}},e.prototype.onKeyUp=function(t){return 13===t.keyCode?(t.preventDefault(),this.search(t)):this.model.get("term")!==t.currentTarget.value?(this.model.set({term:t.currentTarget.value}),this.updateQueryModel()):void 0},e.prototype.checkboxChanged=function(t){var e,n,r,i,s,o;if(e=t.currentTarget.getAttribute("data-attr"))"searchInTranscriptions"===e&&this.$("ul.textlayers").toggle(t.currentTarget.checked),this.model.set(e,t.currentTarget.checked);else if(e=t.currentTarget.getAttribute("data-attr-array")){for(r=[],o=this.el.querySelectorAll('[data-attr-array="'+e+'"]'),i=0,s=o.length;s>i;i++)n=o[i],n.checked&&r.push(n.getAttribute("data-value"));this.model.set(e,r)}return this.updateQueryModel()},e.prototype.search=function(t){return t.preventDefault(),this.trigger("search")},e.prototype.updateQueryModel=function(){return this.trigger("change",this.model.queryData())},e.prototype.reset=function(){return this.setModel(),this.render()},e.prototype.destroy=function(){return this.remove()},e}(n.View),e.exports=i},{"../../jade/text-search.jade":46,"../models/search":22}],38:[function(t,e){var n=t("jade/runtime");e.exports=function(t){var e,r=[],i=t||{};return function(t,i){r.push("<ul>"),function(){var s=t;if("number"==typeof s.length)for(var o=0,a=s.length;a>o;o++){var u=s[o];r.push('<li><div class="row span6"><div class="cell span5"><i'+n.attr("data-value",u.name,!0,!1)+n.cls([u.checked?"fa fa-check-square-o":"fa fa-square-o"],[!0])+"></i><label"+n.attr("data-value",u.name,!0,!1)+">"+n.escape(null==(e=i(u.name))?"":e)+'</label></div><div class="cell span1 alignright"><div class="count">'+n.escape(null==(e=u.count)?"":e)+"</div></div></div></li>")}else{var a=0;for(var o in s){a++;var u=s[o];r.push('<li><div class="row span6"><div class="cell span5"><i'+n.attr("data-value",u.name,!0,!1)+n.cls([u.checked?"fa fa-check-square-o":"fa fa-square-o"],[!0])+"></i><label"+n.attr("data-value",u.name,!0,!1)+">"+n.escape(null==(e=i(u.name))?"":e)+'</label></div><div class="cell span1 alignright"><div class="count">'+n.escape(null==(e=u.count)?"":e)+"</div></div></div></li>")}}}.call(this),r.push("</ul>")}("options"in i?i.options:"undefined"!=typeof options?options:void 0,"ucfirst"in i?i.ucfirst:"undefined"!=typeof ucfirst?ucfirst:void 0),r.join("")}},{"jade/runtime":10}],39:[function(t,e){var n=t("jade/runtime");e.exports=function(t){var e,r=[],i=t||{};return function(t,i,s){r.push("<header><h3"+n.attr("data-name",t,!0,!1)+">"+n.escape(null==(e=i)?"":e)+'</h3></header><div class="body"><label>From:</label><select>'),function(){var t=s;if("number"==typeof t.length)for(var i=0,o=t.length;o>i;i++){var a=t[i];r.push("<option>"+n.escape(null==(e=a)?"":e)+"</option>")}else{var o=0;for(var i in t){o++;var a=t[i];r.push("<option>"+n.escape(null==(e=a)?"":e)+"</option>")}}}.call(this),r.push("</select><label>To:</label><select>"),function(){var t=s.reverse();if("number"==typeof t.length)for(var i=0,o=t.length;o>i;i++){var a=t[i];r.push("<option>"+n.escape(null==(e=a)?"":e)+"</option>")}else{var o=0;for(var i in t){o++;var a=t[i];r.push("<option>"+n.escape(null==(e=a)?"":e)+"</option>")}}}.call(this),r.push("</select></div>")}("name"in i?i.name:"undefined"!=typeof name?name:void 0,"title"in i?i.title:"undefined"!=typeof title?title:void 0,"options"in i?i.options:"undefined"!=typeof options?options:void 0),r.join("")}},{"jade/runtime":10}],40:[function(t,e){t("jade/runtime");e.exports=function(){var t=[];return t.push("<ul></ul>"),t.join("")}},{"jade/runtime":10}],41:[function(t,e){t("jade/runtime");e.exports=function(){var t=[];return t.push('<input type="checkbox" name="all"/><input type="text" name="filter"/><small class="optioncount"></small>'),t.join("")}},{"jade/runtime":10}],42:[function(t,e){var n=t("jade/runtime");e.exports=function(t){var e,r=[],i=t||{};return function(t){r.push("<li"+n.attr("data-count",t.get("count"),!0,!1)+n.attr("data-value",t.id,!0,!1)+n.cls([t.get("checked")?"checked":null],[!0])+"><i"+n.attr("data-value",t.id,!0,!1)+' class="unchecked fa fa-square-o"></i><i'+n.attr("data-value",t.id,!0,!1)+' class="checked fa fa-check-square-o"></i><label'+n.attr("data-value",t.id,!0,!1)+">"+(null==(e=":empty"===t.id?"<em>(empty)</em>":t.id)?"":e)+'</label><div class="count">'+n.escape(null==(e=t.get(0===t.get("count")?"total":"count"))?"":e)+"</div></li>")}("option"in i?i.option:"undefined"!=typeof option?option:void 0),r.join("")}},{"jade/runtime":10}],43:[function(t,e){var n=t("jade/runtime");e.exports=function(t){var e,r=[],i=t||{};return function(t){r.push('<div class="placeholder"><header><h3>'+n.escape(null==(e=t)?"":e)+'</h3><div class="menu"><i title="Filter options" class="filter fa fa-filter"></i><i title="Sort alphabetically" class="alpha fa fa-sort-alpha-asc"></i><i title="Sort numerically" class="amount active fa fa-sort-amount-desc"></i></div><div class="options"></div></header><div class="body"></div></div>')}("title"in i?i.title:"undefined"!=typeof title?title:void 0),r.join("")}},{"jade/runtime":10}],44:[function(t,e){var n=t("jade/runtime");e.exports=function(t){var e=[],r=t||{};return function(t){e.push('<div class="slider"><span class="dash">-</span><div class="handle-min handle"><input'+n.attr("value",t.lowerLimit,!0,!1)+' disabled="disabled" class="min"/></div><div class="handle-max handle"><input'+n.attr("value",t.upperLimit,!0,!1)+' disabled="disabled" class="max"/></div><div class="bar">&nbsp;</div><button>Search?</button></div>')}("options"in r?r.options:"undefined"!=typeof options?options:void 0),e.join("")}},{"jade/runtime":10}],45:[function(t,e){t("jade/runtime");e.exports=function(){var t=[];return t.push('<div class="overlay"><div><i class="fa fa-spinner fa-spin fa-2x"></i></div></div><div class="faceted-search"><div class="text-search-placeholder"></div><ul class="facets-menu"><li class="reset"><button><i class="fa fa-refresh"></i><span>New search</span></button></li><li class="switch"><button><i class="fa fa-angle-double-up"></i><i class="fa fa-angle-double-down"></i><span class="simple">Simple search</span><span class="advanced">Advanced search</span></button></li><li class="collapse-expand"><button><i class="fa fa-compress"></i><span>Collapse filters</span></button></li></ul><div class="facets-placeholder"></div></div><div class="results"></div>'),t.join("")}},{"jade/runtime":10}],46:[function(t,e){var n=t("jade/runtime");e.exports=function(t){var e,r=[],i=t||{};return function(t){r.push('<div class="placeholder"><div class="body"><div class="search-input"><input type="text" name="search"/><i class="fa fa-search"></i></div><div class="menu"><i class="fa fa-times"></i><div class="row-1"><div class="cell-1"><input id="cb_casesensitive" type="checkbox" name="cb_casesensitive" data-attr="caseSensitive"/><label for="cb_casesensitive">Match case</label></div><div class="cell-2"><input id="cb_fuzzy" type="checkbox" name="cb_fuzzy" data-attr="fuzzy"/><label for="cb_fuzzy">Fuzzy</label></div></div><div class="row-2">'),(t.has("searchInAnnotations")||t.has("searchInTranscriptions"))&&(r.push('<div class="cell-1"><h4>Search in:</h4><ul class="searchins">'),t.has("searchInTranscriptions")&&r.push('<li class="searchin"><input id="cb_searchin_transcriptions" type="checkbox" data-attr="searchInTranscriptions"'+n.attr("checked",t.get("searchInTranscriptions"),!0,!1)+'/><label for="cb_searchin_transcriptions">Transcriptions</label></li>'),t.has("searchInAnnotations")&&r.push('<li class="searchin"><input id="cb_searchin_annotations" type="checkbox" data-attr="searchInAnnotations"'+n.attr("checked",t.get("searchInAnnotations"),!0,!1)+'/><label for="cb_searchin_annotations">Annotations</label></li>'),r.push("</ul></div>")),t.has("textLayers")&&t.get("textLayers").length>1&&(r.push('<div class="cell-1"><h4>Textlayers:</h4><ul class="textlayers">'),function(){var i=t.get("textLayers");if("number"==typeof i.length)for(var s=0,o=i.length;o>s;s++){var a=i[s];r.push('<li class="textlayer"><input'+n.attr("id","cb_textlayer"+a,!0,!1)+' type="checkbox" data-attr-array="textLayers"'+n.attr("data-value",a,!0,!1)+' checked="checked"/><label'+n.attr("for","cb_textlayer"+a,!0,!1)+">"+n.escape(null==(e=a)?"":e)+"</label></li>")}else{var o=0;for(var s in i){o++;var a=i[s];r.push('<li class="textlayer"><input'+n.attr("id","cb_textlayer"+a,!0,!1)+' type="checkbox" data-attr-array="textLayers"'+n.attr("data-value",a,!0,!1)+' checked="checked"/><label'+n.attr("for","cb_textlayer"+a,!0,!1)+">"+n.escape(null==(e=a)?"":e)+"</label></li>")}}}.call(this),r.push("</ul></div>")),r.push("</div></div></div></div>")}("model"in i?i.model:"undefined"!=typeof model?model:void 0),r.join("")}},{"jade/runtime":10}]},{},[14])(14)});